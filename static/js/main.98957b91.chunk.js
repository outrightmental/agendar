(this.webpackJsonpagendar=this.webpackJsonpagendar||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n(1),i=n.n(s),c=n(8),o=n.n(c),r=n(7),l=n(2),u=n(3),d=n(5),h=n(4),v=(n(14),6e4),f=36e5,m=24*f,g=null,j={apiKey:p("REACT_APP_GOOGLE_API_KEY"),clientId:p("REACT_APP_GOOGLE_CLIENT_ID"),discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"],scope:["https://www.googleapis.com/auth/calendar.events.readonly","https://www.googleapis.com/auth/calendar.readonly"].join(" ")};function p(e){var t=document.head.querySelector("[name=".concat(e,"][content]"));return t&&t.content?t.content:(console.error("Cannot retrieve value for META tag named",e),"n/a")}for(var b="static-content-",O={},x=document.querySelectorAll("[id^=".concat(b,"]")),M=0;M<x.length;M++)w(x[M].id.replace(b,""));function w(e){var t=document.getElementById("".concat(b).concat(e));O[e]="".concat(t.innerHTML),t.remove()}var S=function(e){var t=e.name;return Object(a.jsx)("div",{className:"container",dangerouslySetInnerHTML:{__html:'<div class="container">'.concat(O[t],"</div>")}})},y=(n(15),["SUN","MON","TUE","WED","THU","FRI","SAT"]),k="IN",I="MINUTE",F=function(e){return"".concat(C(e)," ").concat(N(e))},C=function(e){return"".concat(e.getFullYear(),"-").concat(E(e.getMonth()+1),"-").concat(E(e.getDate())," ").concat(y[e.getDay()])},N=function(e){return"".concat(E(e.getHours()),":").concat(E(e.getMinutes()),":").concat(E(e.getSeconds()))},D=function(e){var t=e.getTime()-Date.now();return t>2*m?"".concat(k," ").concat(Math.floor(t/m)," ").concat("DAYS"):t>m?"".concat(k," ").concat(Math.floor(t/m)," ").concat("DAY"):t>2*f?"".concat(k," ").concat(Math.floor(t/f)," ").concat("HOURS"):t>f?"".concat(k," ").concat(Math.floor(t/f)," ").concat("HOUR"):t>12e4?"".concat(k," ").concat(Math.floor(t/v)," ").concat("MINUTES"):t>v?"".concat(k," ").concat(Math.floor(t/v)," ").concat(I):t>0?"".concat("LESS THAN"," 1 ").concat(I):"NOW"};function E(e){return e<10?"0".concat(e):"".concat(e)}function T(e){var t=e.getTime()-Date.now();return t<0?"event-go":t<6e4?"event-ready":t<6e5?"event-standby":t<36e5?"event-near":"event-far"}var A=function(e){var t,n=e.event,s=new Date,i=n.start.dateTime?new Date(n.start.dateTime):new Date(n.start.date),c=s.getDate()===i.getDate();return Object(a.jsxs)("div",{className:"agendar-event ".concat(T(i)),children:[Object(a.jsxs)("div",{className:"header",children:[Object(a.jsx)("div",{className:"t-minus",children:D(i)}),Object(a.jsx)("div",{className:"date-time",children:c?(t=i,"".concat("TODAY"," ").concat(N(t))):F(i)})]}),Object(a.jsx)("div",{className:"info",children:Object(a.jsx)("div",{className:"summary",children:n.summary})})]},n.id)},L=(n(16),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={date:"",time:""},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({intervalId:setInterval((function(){e.pulse()}),1e3)}),this.pulse()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"pulse",value:function(){var e=new Date;this.setState({time:N(e),date:C(e)})}},{key:"render",value:function(){return Object(a.jsxs)("div",{id:"clock",children:[Object(a.jsx)("p",{className:"date",children:this.state.date}),Object(a.jsx)("p",{className:"time",children:this.state.time})]})}}]),n}(s.Component)),H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={statusMessage:g,alertMessage:g,isMenuOpen:!1,isFullscreen:!1,isSignedIn:!1,intervalId:null,lastFetchedMillis:null,calendarList:[],calendars:{},events:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.createElement("script");t.src="https://apis.google.com/js/platform.js",t.async=!0,t.defer=!0,t.onload=function(){e.didLoadGoogleApi()},document.head.appendChild(t),this.setState({intervalId:setInterval((function(){e.pulse()}),5e3)})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId)}},{key:"pulse",value:function(){if(this.state.isSignedIn){var e=Date.now();!this.state.lastFetchedMillis||this.state.lastFetchedMillis<e-3e5?(this.fetchCalendars(),this.setState({lastFetchedMillis:e})):this.setState({events:this.state.events})}}},{key:"didLoadGoogleApi",value:function(){var e=this,t=this.onSuccess.bind(this);window.gapi.load("auth2",(function(){e.auth2=gapi.auth2.init(j),e.auth2.then((function(){e.setState({isSignedIn:e.auth2.isSignedIn.get()}),e.pulse()}))})),window.gapi.load("signin2",(function(){var e=Object(r.a)(Object(r.a)({},j),{},{width:200,height:50,onsuccess:t});gapi.signin2.render("login-button",e)}))}},{key:"onSuccess",value:function(){this.setState({statusMessage:"Standby\u2026",alertMessage:g}),this.setState({isSignedIn:!0})}},{key:"doLogout",value:function(){var e=this;this.auth2.signOut().then((function(){e.setState({isSignedIn:!1,lastFetchedMillis:null}),window.location.reload(!1)}),(function(){alert("Failed to sign out!")}))}},{key:"doMenuButtonClicked",value:function(){this.state.isMenuOpen?this.setState({isMenuOpen:!1}):this.setState({isMenuOpen:!0})}},{key:"doOpenFullscreen",value:function(){var e=this;document.documentElement.requestFullscreen?document.documentElement.requestFullscreen().then((function(){e.setState({isFullscreen:!0})}),(function(){alert("Failed to open in fullscreen mode!")})):alert("Fullscreen mode not supported in your browser!")}},{key:"doCloseFullscreen",value:function(){var e=this;document.exitFullscreen?document.exitFullscreen().then((function(){e.setState({isFullscreen:!1})}),(function(){e.setState({isFullscreen:!1})})):alert("Fullscreen mode not supported in your browser!")}},{key:"fetchCalendars",value:function(){var e=this;this.setState({statusMessage:"Initializing\u2026"}),window.gapi.load("client",(function(){gapi.client.init(j).then((function(){e.setState({statusMessage:"Loadings Calendars\u2026"}),gapi.client.load("calendar","v3",(function(){gapi.client.calendar.calendarList.list({maxResults:99,orderBy:"startTime"}).then((function(t){var n=[];e.setState({statusMessage:"Loading Events from Calendars\u2026"}),t.result.items.forEach((function(e){var t=e.id;n.push(new Promise((function(e,n){console.debug("Will fetch events from calendar ID:",t),gapi.client.load("calendar","v3",(function(){gapi.client.calendar.events.list({calendarId:t,timeMin:(new Date).toISOString(),timeMax:new Date(Date.now()+864e5).toISOString(),showDeleted:!1,singleEvents:!0,maxResults:99,orderBy:"startTime"}).then((function(n){var a={};a[t]=n.result.items,e(a)}),n)}))})))})),Promise.all(n).then((function(t){var n={};t.forEach((function(e){return Object.assign(n,e)}));var a=[];for(var s in n)n.hasOwnProperty(s)&&n[s].filter((function(e){return!!e.start.dateTime})).filter((function(e){return!e.description||!e.description.includes("This event was added from Goals in Google Calendar.")})).forEach((function(e){return a.push(e)}));var i=a.sort((function(e,t){var n=new Date(e.start.dateTime),a=new Date(t.start.dateTime);return n<a?-1:n>a?1:0}));e.setState({calendars:n,events:i,statusMessage:g,alertMessage:0<i.length?g:"Found no upcoming events."})}))}))}))}))}))}},{key:"renderAgendaCalendarEvents",value:function(){return this.state.events.map((function(e){return Object(a.jsx)(A,{event:e},e.id)}))}},{key:"renderAgendaCalendar",value:function(){return this.state.isSignedIn?Object(a.jsxs)("div",{id:"agendar-calendar",children:[this.state.alertMessage?Object(a.jsx)("p",{className:"status",children:this.state.alertMessage}):"",this.renderAgendaCalendarEvents()]}):Object(a.jsxs)("div",{id:"agendar-calendar",children:[Object(a.jsx)("div",{className:"hero",children:Object(a.jsx)(S,{name:"hero"})}),Object(a.jsx)("button",{className:"space-above",id:"login-button",children:"Login with Google"}),Object(a.jsx)("div",{className:"content space-above",children:Object(a.jsx)(S,{name:"privacy-promise"})})]})}},{key:"renderAgenda",value:function(){return Object(a.jsxs)("div",{id:"agendar",children:[Object(a.jsxs)("div",{id:"agendar-clock",children:[Object(a.jsx)(L,{}),this.state.statusMessage?Object(a.jsx)("p",{className:"status",children:this.state.statusMessage}):""]}),this.renderAgendaCalendar()]})}},{key:"renderMenuButton",value:function(){var e=this;return Object(a.jsx)("div",{className:"ui-button ".concat(this.state.isMenuOpen?"lit":""),id:"menu-button",onClick:function(){return e.doMenuButtonClicked()},children:Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 32 32",children:[Object(a.jsx)("title",{children:"Menu"}),Object(a.jsx)("path",{fill:"#ffffff",d:"M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"})]})})}},{key:"renderMenuContent",value:function(){var e=this;return this.state.isMenuOpen?Object(a.jsx)("div",{id:"menu-backdrop",onClick:function(){return e.doMenuButtonClicked()},children:Object(a.jsxs)("div",{id:"menu-body",children:[Object(a.jsx)("div",{className:"menu-item",children:Object(a.jsxs)("div",{className:"content",children:[Object(a.jsx)(S,{name:"intro"}),Object(a.jsx)(S,{name:"privacy-promise"}),Object(a.jsx)(S,{name:"about"}),Object(a.jsx)(S,{name:"legal"})]})}),this.state.isSignedIn?Object(a.jsx)("div",{className:"menu-item menu-selection",onClick:function(){return e.doLogout()},children:"Logout"}):""]})}):""}},{key:"renderFullscreenButton",value:function(){var e=this;return this.state.isFullscreen?Object(a.jsx)("div",{className:"ui-button",id:"fullscreen-button",onClick:function(){return e.doCloseFullscreen()},children:Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(a.jsx)("title",{children:"Exit Fullscreen Mode"}),Object(a.jsx)("path",{fillRule:"evenodd",fill:"#ffffff",d:"M7 7V1H5v4H1v2h6zM5 19h2v-6H1v2h4v4zm10-4h4v-2h-6v6h2v-4zm0-8h4V5h-4V1h-2v6h2z"})]})}):Object(a.jsx)("div",{className:"ui-button",id:"fullscreen-button",onClick:function(){return e.doOpenFullscreen()},children:Object(a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",children:[Object(a.jsx)("title",{children:"Enter Fullscreen Mode"}),Object(a.jsx)("path",{fillRule:"evenodd",fill:"#ffffff",d:"M1 1v6h2V3h4V1H1zm2 12H1v6h6v-2H3v-4zm14 4h-4v2h6v-6h-2v4zm0-16h-4v2h4v4h2V1h-2z"})]})})}},{key:"render",value:function(){return Object(a.jsxs)("div",{id:"app",children:[this.renderFullscreenButton(),this.renderMenuButton(),this.renderMenuContent(),this.renderAgenda()]})}}]),n}(s.Component),B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(H,{})}),document.getElementById("root")),B()}},[[17,1,2]]]);
//# sourceMappingURL=main.98957b91.chunk.js.map